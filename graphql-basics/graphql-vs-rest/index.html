<!doctypehtml><html lang="en"><meta charset="utf-8"><link rel="icon"type="image/svg+xml"href="/assets/favicon.15621087ab873d484cfdc234ae6d4f0559d2ece6.svg"><meta name="viewport"content="width=device-width,initial-scale=1"><link href="/assets/main.d3c4fd66da45b5fe1b587fd7bc4b64cc7a34bcf3.css"rel="stylesheet"><title>GraphQL vs REST - GraphQL basics - Building GraphQL APIs with AWS AppSync</title><nav class="navbar navbar-light"><div class="container-fluid flex-nowrap"><a class="navbar-brand"href="/">Building GraphQL APIs with AWS AppSync</a> <button class="navbar-toggler d-lg-none align-self-start"type="button"data-bs-toggle="offcanvas"data-bs-target="#offcanvasNavbar"aria-controls="offcanvasNavbar"><span class="navbar-toggler-icon"></span></button><div class="offcanvas offcanvas-end"tabindex="-1"id="offcanvasNavbar"aria-labelledby="offcanvasNavbarLabel"><div class="offcanvas-header"><h5 class="offcanvas-title"id="offcanvasNavbarLabel">Building GraphQL APIs with AWS AppSync</h5><button type="button"class="btn-close text-reset"data-bs-dismiss="offcanvas"aria-label="Close"></button></div><div class="offcanvas-body keep-scrolltop"><ul class="nav navbar-nav justify-content-end flex-grow-1 pe-3"><li class="nav-item"><a class="nav-link"href="/introduction/">Introduction</a><li class="nav-item"><a class="nav-link active"href="/graphql-basics/">GraphQL basics</a><ul class="nav flex-column"><li class="nav-item"><a class="nav-link active"href="/graphql-basics/graphql-vs-rest/">GraphQL vs REST</a><li class="nav-item"><a class="nav-link"href="/graphql-basics/schema/">Schema</a><li class="nav-item"><a class="nav-link"href="/graphql-basics/queries-and-mutations/">Queries and Mutations</a><li class="nav-item"><a class="nav-link"href="/graphql-basics/resolvers/">Resolvers</a><li class="nav-item"><a class="nav-link"href="/graphql-basics/access-control/">Access control</a></ul><li class="nav-item"><a class="nav-link"href="/aws-appsync/">AWS AppSync</a><ul class="nav flex-column"><li class="nav-item"><a class="nav-link"href="/aws-appsync/api-configuration/">API configuration</a><ul class="nav flex-column"><li class="nav-item"><a class="nav-link"href="/aws-appsync/api-configuration/authorization-providers/">Authorization providers</a><li class="nav-item"><a class="nav-link"href="/aws-appsync/api-configuration/logging-and-monitoring/">Logging and monitoring</a><li class="nav-item"><a class="nav-link"href="/aws-appsync/api-configuration/custom-domains/">Custom domains</a><li class="nav-item"><a class="nav-link"href="/aws-appsync/api-configuration/waf/">WAF</a></ul><li class="nav-item"><a class="nav-link"href="/aws-appsync/data-sources/">Data sources</a><ul class="nav flex-column"><li class="nav-item"><a class="nav-link"href="/aws-appsync/data-sources/lambda-1/">Lambda</a><li class="nav-item"><a class="nav-link"href="/aws-appsync/data-sources/dynamodb/">DynamoDB</a><li class="nav-item"><span class="nav-link">HTTP ðŸš§</span><li class="nav-item"><span class="nav-link">RDS ðŸš§</span><li class="nav-item"><span class="nav-link">None ðŸš§</span></ul><li class="nav-item"><span class="nav-link">Resolvers ðŸš§</span><li class="nav-item"><span class="nav-link">Authorization ðŸš§</span><li class="nav-item"><span class="nav-link">Error handling ðŸš§</span><li class="nav-item"><span class="nav-link">Real-time data with subscriptions ðŸš§</span></ul><li class="nav-item"><span class="nav-link">Infrastructure-as-code ðŸš§</span><ul class="nav flex-column"><li class="nav-item"><span class="nav-link">Terraform ðŸš§</span><li class="nav-item"><span class="nav-link">CDK ðŸš§</span><li class="nav-item"><span class="nav-link">Amplify ðŸš§</span></ul><li class="nav-item"><span class="nav-link">Example application ðŸš§</span><li class="nav-item"><a class="nav-link"href="/glossary/">Glossary</a><li class="nav-item"><a class="nav-link"href="/about-the-author/">About the author</a><li class="nav-item"><a class="nav-link"href="/changelog/">Changelog</a><li class="nav-item"><a class="nav-link"href="/copyright/">Copyright</a></ul></div></div></div></nav><div class="d-flex flex-row"><ul class="nav flex-column navigation flex-shrink-0 flex-nowrap overflow-auto d-none d-lg-flex keep-scrolltop"><li class="nav-item"><a class="nav-link"href="/introduction/">Introduction</a><li class="nav-item"><a class="nav-link active"href="/graphql-basics/">GraphQL basics</a><ul class="nav flex-column"><li class="nav-item"><a class="nav-link active"href="/graphql-basics/graphql-vs-rest/">GraphQL vs REST</a><li class="nav-item"><a class="nav-link"href="/graphql-basics/schema/">Schema</a><li class="nav-item"><a class="nav-link"href="/graphql-basics/queries-and-mutations/">Queries and Mutations</a><li class="nav-item"><a class="nav-link"href="/graphql-basics/resolvers/">Resolvers</a><li class="nav-item"><a class="nav-link"href="/graphql-basics/access-control/">Access control</a></ul><li class="nav-item"><a class="nav-link"href="/aws-appsync/">AWS AppSync</a><ul class="nav flex-column"><li class="nav-item"><a class="nav-link"href="/aws-appsync/api-configuration/">API configuration</a><ul class="nav flex-column"><li class="nav-item"><a class="nav-link"href="/aws-appsync/api-configuration/authorization-providers/">Authorization providers</a><li class="nav-item"><a class="nav-link"href="/aws-appsync/api-configuration/logging-and-monitoring/">Logging and monitoring</a><li class="nav-item"><a class="nav-link"href="/aws-appsync/api-configuration/custom-domains/">Custom domains</a><li class="nav-item"><a class="nav-link"href="/aws-appsync/api-configuration/waf/">WAF</a></ul><li class="nav-item"><a class="nav-link"href="/aws-appsync/data-sources/">Data sources</a><ul class="nav flex-column"><li class="nav-item"><a class="nav-link"href="/aws-appsync/data-sources/lambda-1/">Lambda</a><li class="nav-item"><a class="nav-link"href="/aws-appsync/data-sources/dynamodb/">DynamoDB</a><li class="nav-item"><span class="nav-link">HTTP ðŸš§</span><li class="nav-item"><span class="nav-link">RDS ðŸš§</span><li class="nav-item"><span class="nav-link">None ðŸš§</span></ul><li class="nav-item"><span class="nav-link">Resolvers ðŸš§</span><li class="nav-item"><span class="nav-link">Authorization ðŸš§</span><li class="nav-item"><span class="nav-link">Error handling ðŸš§</span><li class="nav-item"><span class="nav-link">Real-time data with subscriptions ðŸš§</span></ul><li class="nav-item"><span class="nav-link">Infrastructure-as-code ðŸš§</span><ul class="nav flex-column"><li class="nav-item"><span class="nav-link">Terraform ðŸš§</span><li class="nav-item"><span class="nav-link">CDK ðŸš§</span><li class="nav-item"><span class="nav-link">Amplify ðŸš§</span></ul><li class="nav-item"><span class="nav-link">Example application ðŸš§</span><li class="nav-item"><a class="nav-link"href="/glossary/">Glossary</a><li class="nav-item"><a class="nav-link"href="/about-the-author/">About the author</a><li class="nav-item"><a class="nav-link"href="/changelog/">Changelog</a><li class="nav-item"><a class="nav-link"href="/copyright/">Copyright</a></ul><div class="flex-grow-1 main container-fluid"><div class="row"><div class="col-lg-9 body p-3"><div class="d-lg-none mb-4"><div class="accordion"id="accordionExample"><div class="accordion-item"><h2 class="accordion-header"id="mobile-toc-header"><button class="accordion-button collapsed"type="button"data-bs-toggle="collapse"data-bs-target="#mobile-toc"aria-expanded="true"aria-controls="mobile-toc">In this chapter</button></h2><div id="mobile-toc"class="accordion-collapse collapse"aria-labelledby="mobile-toc-header"data-bs-parent="#accordionExample"><div class="accordion-body"><div class="toc-container"><a style="margin-left: 0em"href="#graphql-vs-rest">GraphQL vs REST</a> <a style="margin-left: 1em"href="#what-is-rest">What is REST</a> <a style="margin-left: 1em"href="#defined-what-is-graphql">What is GraphQL</a> <a style="margin-left: 1em"href="#the-path-to-graphql">The path to GraphQL</a> <a style="margin-left: 2em"href="#step-1-rest-like">Step 1: REST-like</a> <a style="margin-left: 2em"href="#defined-orchestration-endpoint">Step 2: Orchestration endpoint</a> <a style="margin-left: 2em"href="#step-3-dynamic-orchestration">Step 3: Dynamic orchestration</a> <a style="margin-left: 2em"href="#step-4-graphql">Step 4: GraphQL</a> <a style="margin-left: 1em"href="#advantages-over-rest">Advantages over REST</a> <a style="margin-left: 2em"href="#batteries-included">Batteries included</a> <a style="margin-left: 2em"href="#defined-overfetching-underfetching">No overfetching or underfetching</a> <a style="margin-left: 1em"href="#disadvantages">Disadvantages</a> <a style="margin-left: 2em"href="#expensive-queries">Expensive queries</a> <a style="margin-left: 2em"href="#non-atomic-queries">Non-atomic queries</a> <a style="margin-left: 2em"href="#different-terminology">Different terminology</a></div></div></div></div></div></div><h2 id="graphql-vs-rest">GraphQL vs REST</h2><p>GraphQL is an alternative approach to provide an API, so it's natural to compare it with REST. In this chapter we'll look into the same data model and how we can represent that in the two ways. Then we'll discuss the benefits of using GraphQL.<h3 id="what-is-rest">What is REST</h3><p>REST is based on HTTP paths and verbs to provide operations for resources. For example, let's consider a simple data model where we have users and users can have todo items. A simple API could offer retrieving, creating, and listing objects:<ul><li>GET <code>/user</code> =&gt; List users<li>GET <code>/user/:id</code> =&gt; Get user by ID<li>POST <code>/user</code> =&gt; Create user<li>GET <code>/user/:id/todo</code> =&gt; List todos for user<li>POST <code>/user/:id/todo</code> =&gt; Create todo for user</ul><p>To get the list of users, the GET <code>/user</code> can return this response:<pre class="highlight"><code><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"users"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"user1"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Bob"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"user2"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Joe"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span></code></pre><p>Then to get the todos for the first user, a GET <code>/user/user1/todo</code> can return this:<pre class="highlight"><code><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"todos"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"todo1"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"checked"</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">false</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"todo2"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"checked"</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">true</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span></code></pre><div class="floatbox floatbox-center"><div class="tcolorbox tcolorbox-info"><div class="tbox-header">Note</div><div class="tbox-body"><p>In this comparison we'll focus on queries, as this is where GraphQL provides more benefits. Modifications are way simpler and GraphQL adds almost nothing there as you'll see in the <a href="/graphql-basics/queries-and-mutations/#defined-mutations">Mutations</a> chapter.</div></div></div><p>Following the REST approach gives a good idea what is possible with the API just by looking at the verb + path pairs. It's easy to see what objects are available just by seeing their names in the paths, and the hierarchy among them. In the above example, todo items are part of users, which is evident from the <code>/user/:id/todo</code> path.<p>On the other hand, nothing enforces a REST-like API to follow these conventions, it's entirely up to the developer (or the designer of the API) to make it easy for others to understand the structure. Also, there is no built-in way to document a REST API. To do that, you'll need to rely on other projects, for example, <a href="https://www.openapis.org/">OpenAPI</a>.<p>Queries in REST are HTTP requests to the API endpoint. Usually, a query returns one object (<code>/user/:id</code>) or a list (<code>/user</code>) and any referenced objects need a separate request (<code>/user/:id</code>, then <code>/user/:id/todo</code>).<h3 id="defined-what-is-graphql">What is GraphQL</h3><p>GraphQL is based on <em>graphs</em>. There are nodes, that are similar to objects in REST, and edges between them. In our previous example we had users and todos, and a connection between a user and a todo is that a todo belongs to a user.<figure class="plantuml image"><svg xmlns="http://www.w3.org/2000/svg"height="194"preserveAspectRatio="none"style="width:389px;height:194px;background:#fff"viewBox="0 0 389 194"width="389"><defs><filter height="300%"id="ed4757fc8aac939d0133dbfcdac660fc00fb0c2c063ae56a44223b1979fb747a__a"width="300%"x="-1"y="-1"><feGaussianBlur result="blurOut"stdDeviation="2"></feGaussianBlur><feColorMatrix in="blurOut"result="blurOut2"values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"></feColorMatrix><feOffset dx="4"dy="4"in="blurOut2"result="blurOut3"></feOffset><feBlend in="SourceGraphic"in2="blurOut3"></feBlend></filter></defs><path fill="#FEFECE"filter="url(#ed4757fc8aac939d0133dbfcdac660fc00fb0c2c063ae56a44223b1979fb747a__a)"style="stroke:#a80036;stroke-width:1.5;fill:#fefece"d="M7 131h96v49.25H7z"></path><text font-family="sans-serif"font-size="12"textLength="37"x="36.5"y="144.139">todo1</text><path style="stroke:#a80036;stroke-width:1.5"d="M8 148.969h94"></path><text font-family="sans-serif"font-size="10"textLength="78"x="13"y="162.251">name =&gt; todo1</text><text font-family="sans-serif"font-size="10"textLength="84"x="13"y="173.892">checked =&gt; false</text><path fill="#FEFECE"filter="url(#ed4757fc8aac939d0133dbfcdac660fc00fb0c2c063ae56a44223b1979fb747a__a)"style="stroke:#a80036;stroke-width:1.5;fill:#fefece"d="M138.5 131h93v49.25h-93z"></path><text font-family="sans-serif"font-size="12"textLength="37"x="166.5"y="144.139">todo2</text><path style="stroke:#a80036;stroke-width:1.5"d="M139.5 148.969h91"></path><text font-family="sans-serif"font-size="10"textLength="78"x="144.5"y="162.251">name =&gt; todo2</text><text font-family="sans-serif"font-size="10"textLength="81"x="144.5"y="173.892">checked =&gt; true</text><path fill="#FEFECE"filter="url(#ed4757fc8aac939d0133dbfcdac660fc00fb0c2c063ae56a44223b1979fb747a__a)"style="stroke:#a80036;stroke-width:1.5;fill:#fefece"d="M267.5 131h93v49.25h-93z"></path><text font-family="sans-serif"font-size="12"textLength="37"x="295.5"y="144.139">todo3</text><path style="stroke:#a80036;stroke-width:1.5"d="M268.5 148.969h91"></path><text font-family="sans-serif"font-size="10"textLength="78"x="273.5"y="162.251">name =&gt; todo3</text><text font-family="sans-serif"font-size="10"textLength="81"x="273.5"y="173.892">checked =&gt; true</text><path fill="#FEFECE"filter="url(#ed4757fc8aac939d0133dbfcdac660fc00fb0c2c063ae56a44223b1979fb747a__a)"style="stroke:#a80036;stroke-width:1.5;fill:#fefece"d="M78.5 7h81v60.891h-81z"></path><text font-family="sans-serif"font-size="12"textLength="36"x="101"y="20.139">user1</text><path style="stroke:#a80036;stroke-width:1.5"d="M79.5 24.969h79"></path><text font-family="sans-serif"font-size="10"textLength="57"x="84.5"y="38.251">id =&gt; user1</text><text font-family="sans-serif"font-size="10"textLength="69"x="84.5"y="49.892">name =&gt; Bob</text><text font-family="sans-serif"font-size="10"textLength="27"x="84.5"y="61.532">todos</text><path fill="#FEFECE"filter="url(#ed4757fc8aac939d0133dbfcdac660fc00fb0c2c063ae56a44223b1979fb747a__a)"style="stroke:#a80036;stroke-width:1.5;fill:#fefece"d="M274.5 7h77v60.891h-77z"></path><text font-family="sans-serif"font-size="12"textLength="36"x="295"y="20.139">user2</text><path style="stroke:#a80036;stroke-width:1.5"d="M275.5 24.969h75"></path><text font-family="sans-serif"font-size="10"textLength="57"x="280.5"y="38.251">id =&gt; user2</text><text font-family="sans-serif"font-size="10"textLength="65"x="280.5"y="49.892">name =&gt; Joe</text><text font-family="sans-serif"font-size="10"textLength="27"x="280.5"y="61.532">todos</text><path d="M78 58c-28.05 0-29.72 39.06-27.22 67.48"fill="none"style="stroke:#a80036;stroke-width:1;fill:none"></path><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m51.29 130.65 3.106-9.346-3.592 4.37-4.37-3.592 4.856 8.568z"></path><path d="M161 58c28.12 0 30.17 39.06 27.95 67.48"fill="none"style="stroke:#a80036;stroke-width:1;fill:none"></path><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m188.49 130.65 4.783-8.61-4.34 3.63-3.629-4.34 3.186 9.32z"></path><path d="M353 58c29.8 0 5.03 40.03-16.37 68.53"fill="none"style="stroke:#a80036;stroke-width:1;fill:none"></path><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m333.5 130.65 8.62-4.766-5.604.778-.778-5.603-2.238 9.591z"></path></svg><figcaption class="caption">Users and todos in a graph</figcaption></figure><p>In the above data model, the user objects have a <code>todos</code> <em>field</em> and the todo items are referenced through that field. You can think of it as a <em>label</em> on the edge that distinguishes <em>how</em> the objects are connected. For example, let's say users can have friends and blocked users. In that case, two users can be connected in two ways: friend or blocked.<p>This is visualized like this:<figure class="plantuml image"><svg xmlns="http://www.w3.org/2000/svg"height="288"preserveAspectRatio="none"style="width:191px;height:288px;background:#fff"viewBox="0 0 191 288"width="191"><defs><filter height="300%"id="7b9836bcaa8d85adbfefb7b435ecdddb5c310515e44b6e0e80b2d03f57ab601e__a"width="300%"x="-1"y="-1"><feGaussianBlur result="blurOut"stdDeviation="2"></feGaussianBlur><feColorMatrix in="blurOut"result="blurOut2"values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"></feColorMatrix><feOffset dx="4"dy="4"in="blurOut2"result="blurOut3"></feOffset><feBlend in="SourceGraphic"in2="blurOut3"></feBlend></filter></defs><path fill="#FEFECE"filter="url(#7b9836bcaa8d85adbfefb7b435ecdddb5c310515e44b6e0e80b2d03f57ab601e__a)"style="stroke:#a80036;stroke-width:1.5;fill:#fefece"d="M54.51 7h81v37.609h-81z"></path><text font-family="sans-serif"font-size="12"textLength="36"x="77.01"y="20.139">user1</text><path style="stroke:#a80036;stroke-width:1.5"d="M55.51 24.969h79"></path><text font-family="sans-serif"font-size="10"textLength="69"x="60.51"y="38.251">name =&gt; Bob</text><path fill="#FEFECE"filter="url(#7b9836bcaa8d85adbfefb7b435ecdddb5c310515e44b6e0e80b2d03f57ab601e__a)"style="stroke:#a80036;stroke-width:1.5;fill:#fefece"d="M8.51 122h77v37.609h-77z"></path><text font-family="sans-serif"font-size="12"textLength="36"x="29.01"y="135.139">user2</text><path style="stroke:#a80036;stroke-width:1.5"d="M9.51 139.969h75"></path><text font-family="sans-serif"font-size="10"textLength="65"x="14.51"y="153.251">name =&gt; Joe</text><path fill="#FEFECE"filter="url(#7b9836bcaa8d85adbfefb7b435ecdddb5c310515e44b6e0e80b2d03f57ab601e__a)"style="stroke:#a80036;stroke-width:1.5;fill:#fefece"d="M59.51 237h83v37.609h-83z"></path><text font-family="sans-serif"font-size="12"textLength="36"x="83.01"y="250.139">user3</text><path style="stroke:#a80036;stroke-width:1.5"d="M60.51 254.969h81"></path><text font-family="sans-serif"font-size="10"textLength="71"x="65.51"y="268.251">name =&gt; Jane</text><path d="M54.28 40.99C38.82 48.52 22.83 59.52 14.01 75c-8.01 14.05.2 30.27 10.43 42.99"fill="none"style="stroke:#a80036;stroke-width:1;fill:none"></path><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m27.67 121.82-2.723-9.465-.492 5.636-5.635-.492 8.85 4.321z"></path><text font-family="sans-serif"font-size="13"textLength="36"x="15.01"y="88.067">friend</text><path d="M54.7 121.89c8.32-19.59 21.6-50.85 30.63-72.1"fill="none"style="stroke:#a80036;stroke-width:1;fill:none"></path><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m87.3 45.16-7.204 6.716 5.246-2.115 2.115 5.247-.157-9.848z"></path><text font-family="sans-serif"font-size="13"textLength="36"x="75.01"y="88.067">friend</text><path d="M107.04 45.36c4.99 8.63 10.24 19.28 12.97 29.64 14.95 56.76 17 74.77 4 132-1.93 8.51-5.57 17.27-9.39 24.94"fill="none"style="stroke:#a80036;stroke-width:1;fill:none"></path><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m112.23 236.56 7.69-6.154-5.391 1.714-1.714-5.391-.585 9.831z"></path><text font-family="sans-serif"font-size="13"textLength="49"x="134.01"y="145.567">blocked</text><path d="M55.69 160.16c9.36 19.6 24.31 50.87 34.45 72.09"fill="none"style="stroke:#a80036;stroke-width:1;fill:none"></path><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m92.36 236.89-.271-9.845-1.885 5.334-5.333-1.885 7.489 6.396z"></path><text font-family="sans-serif"font-size="13"textLength="36"x="79.01"y="203.067">friend</text></svg><figcaption class="caption">User1 is friends with user2 and blocks user3</figcaption></figure><p>Also, edges are <strong>directed</strong>. A user might block another user but that might not be mutual.<div class="floatbox floatbox-center"><div class="tcolorbox tcolorbox-info"><div class="tbox-header">Note</div><div class="tbox-body"><p>GraphQL comes from Facebook, and you can see how it naturally translates to a social network. People have friends (a connection between the two user objects), they can publish posts (a connection between a user and a post), can comment (a connection between a post and a comment, and also between a user and the comment), and so on. Graph-based APIs work best where queries need <em>related data</em> to an object. For example, getting the todo items is easy to define as a graph operation (just follow the edges from the user). But ultimately, everything can be implemented in GraphQL.</div></div></div><p>Queries in GraphQL define the whole structure the requester needs. For example, a single query might get a user object and all todos for that user. Or, in a more complex example, a query might get a user, its latest posts, its friends, and their latest posts too.<figure class="plantuml image"><svg xmlns="http://www.w3.org/2000/svg"height="168"preserveAspectRatio="none"style="width:333px;height:168px;background:#fff"viewBox="0 0 333 168"width="333"><defs><filter height="300%"id="3e727997e9c357e9d5f099fd23a469a41e0331d5d14356c28fe1deda8017d425__a"width="300%"x="-1"y="-1"><feGaussianBlur result="blurOut"stdDeviation="2"></feGaussianBlur><feColorMatrix in="blurOut"result="blurOut2"values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"></feColorMatrix><feOffset dx="4"dy="4"in="blurOut2"result="blurOut3"></feOffset><feBlend in="SourceGraphic"in2="blurOut3"></feBlend></filter></defs><path fill="#90EE90"filter="url(#3e727997e9c357e9d5f099fd23a469a41e0331d5d14356c28fe1deda8017d425__a)"style="stroke:#a80036;stroke-width:1.5;fill:#90ee90"d="M12.5 9.566h50v33.969h-50z"></path><text font-family="sans-serif"font-size="12"textLength="36"x="19.5"y="22.705">user1</text><path style="stroke:#a80036;stroke-width:1.5"d="M13.5 27.535h48"></path><path fill="#90EE90"filter="url(#3e727997e9c357e9d5f099fd23a469a41e0331d5d14356c28fe1deda8017d425__a)"style="stroke:#a80036;stroke-width:1.5;fill:#90ee90"d="M135.5 9.566h50v33.969h-50z"></path><text font-family="sans-serif"font-size="12"textLength="36"x="142.5"y="22.705">user2</text><path style="stroke:#a80036;stroke-width:1.5"d="M136.5 27.535h48"></path><path fill="#FEFECE"filter="url(#3e727997e9c357e9d5f099fd23a469a41e0331d5d14356c28fe1deda8017d425__a)"style="stroke:#a80036;stroke-width:1.5;fill:#fefece"d="M238.5 9.566h50v33.969h-50z"></path><text font-family="sans-serif"font-size="12"textLength="36"x="245.5"y="22.705">user3</text><path style="stroke:#a80036;stroke-width:1.5"d="M239.5 27.535h48"></path><path fill="#90EE90"filter="url(#3e727997e9c357e9d5f099fd23a469a41e0331d5d14356c28fe1deda8017d425__a)"style="stroke:#a80036;stroke-width:1.5;fill:#90ee90"d="M7 120.566h61v33.969H7z"></path><text font-family="sans-serif"font-size="12"textLength="47"x="14"y="133.705">article1</text><path style="stroke:#a80036;stroke-width:1.5"d="M8 138.535h59"></path><path fill="#90EE90"filter="url(#3e727997e9c357e9d5f099fd23a469a41e0331d5d14356c28fe1deda8017d425__a)"style="stroke:#a80036;stroke-width:1.5;fill:#90ee90"d="M130 120.566h61v33.969h-61z"></path><text font-family="sans-serif"font-size="12"textLength="47"x="137"y="133.705">article2</text><path style="stroke:#a80036;stroke-width:1.5"d="M131 138.535h59"></path><path fill="#FEFECE"filter="url(#3e727997e9c357e9d5f099fd23a469a41e0331d5d14356c28fe1deda8017d425__a)"style="stroke:#a80036;stroke-width:1.5;fill:#fefece"d="M233 120.566h61v33.969h-61z"></path><text font-family="sans-serif"font-size="12"textLength="47"x="240"y="133.705">article3</text><path style="stroke:#a80036;stroke-width:1.5"d="M234 138.535h59"></path><path d="M62.69 26.566h67.53"fill="none"style="stroke:#a80036;stroke-width:1;fill:none"></path><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m135.35 26.566-9-4 4 4-4 4 9-4z"></path><text font-family="sans-serif"font-size="13"textLength="36"x="81"y="19.633">friend</text><path d="M37.5 43.646v71.67"fill="none"style="stroke:#a80036;stroke-width:1;fill:none"></path><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m37.5 120.416 4-9-4 4-4-4 4 9z"></path><text font-family="sans-serif"font-size="13"textLength="61"x="38.5"y="86.633">published</text><path d="M159.03 43.616c-1 12.73-2.05 30.97-1.53 46.95.26 8.06.78 16.9 1.32 24.66"fill="none"style="stroke:#a80036;stroke-width:1;fill:none"></path><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m159.19 120.396 3.347-9.263-3.704 4.276-4.276-3.704 4.633 8.69z"></path><text font-family="sans-serif"font-size="13"textLength="61"x="158.5"y="86.633">published</text><path d="M263.5 43.646v71.67"fill="none"style="stroke:#a80036;stroke-width:1;fill:none"></path><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m263.5 120.416 4-9-4 4-4-4 4 9z"></path><text font-family="sans-serif"font-size="13"textLength="61"x="264.5"y="86.633">published</text></svg><figcaption class="caption">A single query can retrieve multiple objects</figcaption></figure><div class="floatbox floatbox-center"><div class="tcolorbox tcolorbox-info"><div class="tbox-header">Note</div><div class="tbox-body"><p>GraphQL needs a <strong>schema</strong> that defines the object graph and what connections are available from each type. We'll discuss this in detail in the <a href="/graphql-basics/schema/#defined-schema">Schema</a> chapter.</div></div></div><p>Getting back to our original data model of users and todos, a query can ask for a specific user and its todo items:<pre class="highlight"><code><span class="hljs-keyword">query</span> {
  user(id: <span class="hljs-string">"user1"</span>) {
    name
    todos {
      name
      checked
    }
  }
}</code></pre><p>A response contains all the fields:<pre class="highlight"><code><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"user"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Bob"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"todos"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"todo1"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"checked"</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">false</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"todo2"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"checked"</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">true</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre><h3 id="the-path-to-graphql">The path to GraphQL</h3><p>An excellent article from PayPal titled <a href="https://medium.com/paypal-tech/graphql-a-success-story-for-paypal-checkout-3482f724fb53">GraphQL: A Success Story for PayPal Checkout</a> illustrates the steps teams usually takes to move from REST-like APIs to GraphQL and what the motivations are.<p>In this chapter we'll take a look into how they progressed from a REST-like API to GraphQL.<h4 id="step-1-rest-like">Step 1: REST-like</h4><p>A new API is usually created with purity in mind, and REST is a great choice for that. There is an endpoint for each object, allowing CRUD (Create, Retrieve, Update, Delete) operations for them. For a backend developer, this is the easiest, as these objects usually directly map to the database. Then the frontend(s) can get what it needs by fetching the objects.<figure class="plantuml image"><svg xmlns="http://www.w3.org/2000/svg"height="290"preserveAspectRatio="none"style="width:234px;height:290px;background:#fff"viewBox="0 0 234 290"width="234"><defs><filter height="300%"id="d5e813a51a64f334b5729009b9b69b1c008d7f8ed1f2bc799951bb897f03130e__a"width="300%"x="-1"y="-1"><feGaussianBlur result="blurOut"stdDeviation="2"></feGaussianBlur><feColorMatrix in="blurOut"result="blurOut2"values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"></feColorMatrix><feOffset dx="4"dy="4"in="blurOut2"result="blurOut3"></feOffset><feBlend in="SourceGraphic"in2="blurOut3"></feBlend></filter></defs><path style="stroke:#a80036;stroke-width:1;stroke-dasharray:5,5"d="M26 88.297v194.797M199.5 88.297v194.797"></path><text font-family="sans-serif"font-size="14"textLength="37"x="5"y="84.995">client</text><circle cx="26.5"cy="15"fill="#FEFECE"filter="url(#d5e813a51a64f334b5729009b9b69b1c008d7f8ed1f2bc799951bb897f03130e__a)"style="stroke:#a80036;stroke-width:2"r="8"></circle><path d="M26.5 23v27m-13-19h26m-13 19-13 15m13-15 13 15"fill="none"filter="url(#d5e813a51a64f334b5729009b9b69b1c008d7f8ed1f2bc799951bb897f03130e__a)"style="stroke:#a80036;stroke-width:2;fill:none"></path><text font-family="sans-serif"font-size="14"textLength="62"x="165.5"y="84.995">REST API</text><circle cx="199.5"cy="56"fill="#FEFECE"filter="url(#d5e813a51a64f334b5729009b9b69b1c008d7f8ed1f2bc799951bb897f03130e__a)"style="stroke:#a80036;stroke-width:2"r="12"></circle><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m195.5 44 6-5-2 5 2 5-6-5zm-8 71.43 10 4-10 4 4-4z"></path><path style="stroke:#a80036;stroke-width:1"d="M26.5 119.43h167"></path><text font-family="sans-serif"font-size="13"textLength="57"x="33.5"y="114.364">GET user</text><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m37.5 144.563-10 4 10 4-4-4z"></path><path style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2"d="M31.5 148.563h167"></path><text font-family="sans-serif"font-size="13"textLength="16"x="43.5"y="143.497">{}</text><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m187.5 173.695 10 4-10 4 4-4z"></path><path style="stroke:#a80036;stroke-width:1"d="M26.5 177.695h167"></path><text font-family="sans-serif"font-size="13"textLength="149"x="33.5"y="172.629">GET shippingAddresses</text><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m37.5 202.828-10 4 10 4-4-4z"></path><path style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2"d="M31.5 206.828h167"></path><text font-family="sans-serif"font-size="13"textLength="16"x="43.5"y="201.762">{}</text><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m187.5 231.96 10 4-10 4 4-4z"></path><path style="stroke:#a80036;stroke-width:1"d="M26.5 235.961h167"></path><text font-family="sans-serif"font-size="13"textLength="125"x="33.5"y="230.895">GET fundingOptions</text><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m37.5 261.094-10 4 10 4-4-4z"></path><path style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2"d="M31.5 265.094h167"></path><text font-family="sans-serif"font-size="13"textLength="16"x="43.5"y="260.028">{}</text></svg><figcaption class="caption">REST-based API</figcaption></figure><p>This is great from an architectural perspective, but terrible for user-experience. The number of requests and roundtrips the client needs to do to show the page to the user is the #1 contributor to slowness. And REST-like APIs, especially those that follow data normalization best practices, require several requests in series to fetch all data.<figure class="plantuml image"><svg xmlns="http://www.w3.org/2000/svg"height="563"preserveAspectRatio="none"style="width:356px;height:563px;background:#fff"viewBox="0 0 356 563"width="356"><defs><filter height="300%"id="3c515f56db21d280ff4863c471d1e2109de443cfb7273879b9b5676b89aa46aa__a"width="300%"x="-1"y="-1"><feGaussianBlur result="blurOut"stdDeviation="2"></feGaussianBlur><feColorMatrix in="blurOut"result="blurOut2"values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"></feColorMatrix><feOffset dx="4"dy="4"in="blurOut2"result="blurOut3"></feOffset><feBlend in="SourceGraphic"in2="blurOut3"></feBlend></filter></defs><path style="stroke:#a80036;stroke-width:1;stroke-dasharray:5,5"d="M116 88.297v468.656M321.5 88.297v468.656"></path><text font-family="sans-serif"font-size="14"textLength="37"x="95"y="84.995">client</text><circle cx="116.5"cy="15"fill="#FEFECE"filter="url(#3c515f56db21d280ff4863c471d1e2109de443cfb7273879b9b5676b89aa46aa__a)"style="stroke:#a80036;stroke-width:2"r="8"></circle><path d="M116.5 23v27m-13-19h26m-13 19-13 15m13-15 13 15"fill="none"filter="url(#3c515f56db21d280ff4863c471d1e2109de443cfb7273879b9b5676b89aa46aa__a)"style="stroke:#a80036;stroke-width:2;fill:none"></path><text font-family="sans-serif"font-size="14"textLength="62"x="287.5"y="84.995">REST API</text><circle cx="321.5"cy="56"fill="#FEFECE"filter="url(#3c515f56db21d280ff4863c471d1e2109de443cfb7273879b9b5676b89aa46aa__a)"style="stroke:#a80036;stroke-width:2"r="12"></circle><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m317.5 44 6-5-2 5 2 5-6-5zm-8 71.43 10 4-10 4 4-4z"></path><path style="stroke:#a80036;stroke-width:1"d="M116.5 119.43h199"></path><text font-family="sans-serif"font-size="13"textLength="126"x="123.5"y="114.364">GET /order/OR-1234</text><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m127.5 149.563-10 4 10 4-4-4z"></path><path style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2"d="M121.5 153.563h199"></path><text font-family="sans-serif"font-size="13"textLength="163"x="133.5"y="148.497">{"products": ["PR-1235"]}</text><path d="M38 132.43v25h69v-15l-10-10H38"fill="#FBFB77"filter="url(#3c515f56db21d280ff4863c471d1e2109de443cfb7273879b9b5676b89aa46aa__a)"style="stroke:#a80036;stroke-width:1;fill:#fbfb77"></path><path d="M97 132.43v10h10l-10-10"fill="#FBFB77"style="stroke:#a80036;stroke-width:1;fill:#fbfb77"></path><text font-family="sans-serif"font-size="13"textLength="48"x="44"y="149.497">700 ms</text><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m309.5 183.695 10 4-10 4 4-4z"></path><path style="stroke:#a80036;stroke-width:1"d="M116.5 187.695h199"></path><text font-family="sans-serif"font-size="13"textLength="139"x="123.5"y="182.629">GET /product/PR-1234</text><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m127.5 258.227-10 4 10 4-4-4z"></path><path style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2"d="M121.5 262.227h199"></path><text font-family="sans-serif"font-size="13"textLength="8"x="133.5"y="211.762">{</text><text font-family="sans-serif"font-size="13"textLength="116"x="141.5"y="226.895">"name": "Battery",</text><text font-family="sans-serif"font-size="13"textLength="172"x="141.5"y="242.028">"manufacturer": "MA-1234"</text><text font-family="sans-serif"font-size="13"textLength="8"x="133.5"y="257.161">}</text><path d="M30 218.394v25h77v-15l-10-10H30"fill="#FBFB77"filter="url(#3c515f56db21d280ff4863c471d1e2109de443cfb7273879b9b5676b89aa46aa__a)"style="stroke:#a80036;stroke-width:1;fill:#fbfb77"></path><path d="M97 218.394v10h10l-10-10"fill="#FBFB77"style="stroke:#a80036;stroke-width:1;fill:#fbfb77"></path><text font-family="sans-serif"font-size="13"textLength="56"x="36"y="235.461">1400 ms</text><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m309.5 287.36 10 4-10 4 4-4z"></path><path style="stroke:#a80036;stroke-width:1"d="M116.5 291.359h199"></path><text font-family="sans-serif"font-size="13"textLength="181"x="123.5"y="286.293">GET /manufacturer/MA-1234</text><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m127.5 361.89-10 4 10 4-4-4z"></path><path style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2"d="M121.5 365.891h199"></path><text font-family="sans-serif"font-size="13"textLength="8"x="133.5"y="315.426">{</text><text font-family="sans-serif"font-size="13"textLength="138"x="141.5"y="330.559">"name": "Acme corp",</text><text font-family="sans-serif"font-size="13"textLength="153"x="141.5"y="345.692">"address": "ADDR-1234"</text><text font-family="sans-serif"font-size="13"textLength="8"x="133.5"y="360.825">}</text><path d="M30 322.059v25h77v-15l-10-10H30"fill="#FBFB77"filter="url(#3c515f56db21d280ff4863c471d1e2109de443cfb7273879b9b5676b89aa46aa__a)"style="stroke:#a80036;stroke-width:1;fill:#fbfb77"></path><path d="M97 322.059v10h10l-10-10"fill="#FBFB77"style="stroke:#a80036;stroke-width:1;fill:#fbfb77"></path><text font-family="sans-serif"font-size="13"textLength="56"x="36"y="339.125">2100 ms</text><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m309.5 391.023 10 4-10 4 4-4z"></path><path style="stroke:#a80036;stroke-width:1"d="M116.5 395.023h199"></path><text font-family="sans-serif"font-size="13"textLength="162"x="123.5"y="389.957">GET /address/ADDR-1234</text><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m127.5 465.555-10 4 10 4-4-4z"></path><path style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2"d="M121.5 469.555h199"></path><text font-family="sans-serif"font-size="13"textLength="8"x="133.5"y="419.09">{</text><text font-family="sans-serif"font-size="13"textLength="117"x="141.5"y="434.223">"city": "Acme city",</text><text font-family="sans-serif"font-size="13"textLength="12"x="141.5"y="449.356">...</text><text font-family="sans-serif"font-size="13"textLength="8"x="133.5"y="464.489">}</text><path d="M30 425.723v25h77v-15l-10-10H30"fill="#FBFB77"filter="url(#3c515f56db21d280ff4863c471d1e2109de443cfb7273879b9b5676b89aa46aa__a)"style="stroke:#a80036;stroke-width:1;fill:#fbfb77"></path><path d="M97 425.723v10h10l-10-10"fill="#FBFB77"style="stroke:#a80036;stroke-width:1;fill:#fbfb77"></path><text font-family="sans-serif"font-size="13"textLength="56"x="36"y="442.79">2800 ms</text><path d="M5 482.555v55h219v-45l-10-10H5"fill="#FBFB77"filter="url(#3c515f56db21d280ff4863c471d1e2109de443cfb7273879b9b5676b89aa46aa__a)"style="stroke:#a80036;stroke-width:1;fill:#fbfb77"></path><path d="M214 482.555v10h10l-10-10"fill="#FBFB77"style="stroke:#a80036;stroke-width:1;fill:#fbfb77"></path><text font-family="sans-serif"font-size="13"textLength="70"x="11"y="499.622">Your order:</text><text font-family="sans-serif"font-size="13"textLength="47"x="11"y="514.754">Battery</text><text font-family="sans-serif"font-size="13"textLength="190"x="19"y="529.887">(from: Acme Corp, Acme city)</text></svg><figcaption class="caption">The number of roundtrips make clients slow</figcaption></figure><p>In the above example, showing a simple overview of the order required 4 roundtrips: order -&gt; product -&gt; manufacturer -&gt; address. This structure follows all the best practices for database architecture and the API is a pure representation of what is stored, but the UX is awful.<h4 id="defined-orchestration-endpoint">Step 2: Orchestration endpoint</h4><p>The logical next step is to create an endpoint to aggregate the data, so the client needs to send only one request, then the backend fetches the data from the REST API locally. Since the roundtrips are shorter (the REST API is local to this endpoint) this way, the lag the client experiences is just one request.<figure class="plantuml image"><svg xmlns="http://www.w3.org/2000/svg"height="566"preserveAspectRatio="none"style="width:496px;height:566px;background:#fff"viewBox="0 0 496 566"width="496"><defs><filter height="300%"id="a8d61815b13ad8ebe2f982e5b4fffcbe76f0a91d4290c8597bfff677e3c1d410__a"width="300%"x="-1"y="-1"><feGaussianBlur result="blurOut"stdDeviation="2"></feGaussianBlur><feColorMatrix in="blurOut"result="blurOut2"values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"></feColorMatrix><feOffset dx="4"dy="4"in="blurOut2"result="blurOut3"></feOffset><feBlend in="SourceGraphic"in2="blurOut3"></feBlend></filter></defs><path style="stroke:#a80036;stroke-width:1;stroke-dasharray:5,5"d="M116 88.297V559.82M256.5 88.297V559.82m205-471.523V559.82"></path><text font-family="sans-serif"font-size="14"textLength="37"x="95"y="84.995">client</text><circle cx="116.5"cy="15"fill="#FEFECE"filter="url(#a8d61815b13ad8ebe2f982e5b4fffcbe76f0a91d4290c8597bfff677e3c1d410__a)"style="stroke:#a80036;stroke-width:2"r="8"></circle><path d="M116.5 23v27m-13-19h26m-13 19-13 15m13-15 13 15"fill="none"filter="url(#a8d61815b13ad8ebe2f982e5b4fffcbe76f0a91d4290c8597bfff677e3c1d410__a)"style="stroke:#a80036;stroke-width:2;fill:none"></path><text font-family="sans-serif"font-size="14"textLength="94"x="206.5"y="68.698">Orchestration</text><text font-family="sans-serif"font-size="14"textLength="62"x="222.5"y="84.995">endpoint</text><circle cx="256.5"cy="39.703"fill="#FEFECE"filter="url(#a8d61815b13ad8ebe2f982e5b4fffcbe76f0a91d4290c8597bfff677e3c1d410__a)"style="stroke:#a80036;stroke-width:2"r="12"></circle><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m252.5 27.703 6-5-2 5 2 5-6-5z"></path><text font-family="sans-serif"font-size="14"textLength="62"x="427.5"y="84.995">REST API</text><circle cx="461.5"cy="56"fill="#FEFECE"filter="url(#a8d61815b13ad8ebe2f982e5b4fffcbe76f0a91d4290c8597bfff677e3c1d410__a)"style="stroke:#a80036;stroke-width:2"r="12"></circle><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m457.5 44 6-5-2 5 2 5-6-5zm-213 71.43 10 4-10 4 4-4z"></path><path style="stroke:#a80036;stroke-width:1"d="M116.5 119.43h134"></path><text font-family="sans-serif"font-size="13"textLength="116"x="123.5"y="114.364">GET /landing-page</text><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m449.5 144.563 10 4-10 4 4-4z"></path><path style="stroke:#a80036;stroke-width:1"d="M256.5 148.563h199"></path><text font-family="sans-serif"font-size="13"textLength="126"x="263.5"y="143.497">GET /order/OR-1234</text><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m267.5 173.695-10 4 10 4-4-4z"></path><path style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2"d="M261.5 177.695h199"></path><text font-family="sans-serif"font-size="13"textLength="16"x="273.5"y="172.629">{}</text><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m449.5 202.828 10 4-10 4 4-4z"></path><path style="stroke:#a80036;stroke-width:1"d="M256.5 206.828h199"></path><text font-family="sans-serif"font-size="13"textLength="139"x="263.5"y="201.762">GET /product/PR-1234</text><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m267.5 231.96-10 4 10 4-4-4z"></path><path style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2"d="M261.5 235.961h199"></path><text font-family="sans-serif"font-size="13"textLength="16"x="273.5"y="230.895">{}</text><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m449.5 261.094 10 4-10 4 4-4z"></path><path style="stroke:#a80036;stroke-width:1"d="M256.5 265.094h199"></path><text font-family="sans-serif"font-size="13"textLength="181"x="263.5"y="260.028">GET /manufacturer/MA-1234</text><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m267.5 290.227-10 4 10 4-4-4z"></path><path style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2"d="M261.5 294.227h199"></path><text font-family="sans-serif"font-size="13"textLength="16"x="273.5"y="289.161">{}</text><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m449.5 319.36 10 4-10 4 4-4z"></path><path style="stroke:#a80036;stroke-width:1"d="M256.5 323.359h199"></path><text font-family="sans-serif"font-size="13"textLength="162"x="263.5"y="318.293">GET /address/ADDR-1234</text><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m267.5 348.492-10 4 10 4-4-4z"></path><path style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2"d="M261.5 352.492h199"></path><text font-family="sans-serif"font-size="13"textLength="16"x="273.5"y="347.426">{}</text><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m127.5 468.422-10 4 10 4-4-4z"></path><path style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2"d="M121.5 472.422h134"></path><text font-family="sans-serif"font-size="13"textLength="8"x="133.5"y="376.559">{</text><text font-family="sans-serif"font-size="13"textLength="38"x="141.5"y="391.692">order,</text><text font-family="sans-serif"font-size="13"textLength="53"x="141.5"y="406.825">product,</text><text font-family="sans-serif"font-size="13"textLength="91"x="141.5"y="421.957">manufacturer,</text><text font-family="sans-serif"font-size="13"textLength="55"x="141.5"y="437.09">address,</text><text font-family="sans-serif"font-size="13"textLength="12"x="141.5"y="452.223">...</text><text font-family="sans-serif"font-size="13"textLength="8"x="133.5"y="467.356">}</text><path d="M38 405.89v25h69v-15l-10-10H38"fill="#FBFB77"filter="url(#a8d61815b13ad8ebe2f982e5b4fffcbe76f0a91d4290c8597bfff677e3c1d410__a)"style="stroke:#a80036;stroke-width:1;fill:#fbfb77"></path><path d="M97 405.89v10h10l-10-10"fill="#FBFB77"style="stroke:#a80036;stroke-width:1;fill:#fbfb77"></path><text font-family="sans-serif"font-size="13"textLength="48"x="44"y="422.957">700 ms</text><path d="M5 485.422v55h219v-45l-10-10H5"fill="#FBFB77"filter="url(#a8d61815b13ad8ebe2f982e5b4fffcbe76f0a91d4290c8597bfff677e3c1d410__a)"style="stroke:#a80036;stroke-width:1;fill:#fbfb77"></path><path d="M214 485.422v10h10l-10-10"fill="#FBFB77"style="stroke:#a80036;stroke-width:1;fill:#fbfb77"></path><text font-family="sans-serif"font-size="13"textLength="70"x="11"y="502.489">Your order:</text><text font-family="sans-serif"font-size="13"textLength="47"x="11"y="517.622">Battery</text><text font-family="sans-serif"font-size="13"textLength="190"x="19"y="532.754">(from: Acme Corp, Acme city)</text></svg><figcaption class="caption">Orchestration endpoint</figcaption></figure><p>This solves the roundtrips problem, but introduces a different one: <strong>overfetching</strong>. What if a client does not need to show the address of the manufacturer? For example, a mobile app might hide the details by default due to the smaller screen. If the endpoint returns everything any of the clients needs then most of the data will be discarded.<p>A bad solution is to provide a separate orchestration endpoint for every client. Instead of a single <code>/landing-page</code>, there could be a <code>/landing-page-mobile</code> and a <code>/landing-page-desktop</code>, each client calling the appropriate one. In practice, this leads to every person working on a client having a separate endpoint.<h4 id="step-3-dynamic-orchestration">Step 3: Dynamic orchestration</h4><p>The problem with an orchestration endpoint we used in the previous step is that it's static by nature. One can return all the data for a landing page or a checkout form, but not both. Instead of the client defining what it needs, the server provides data only for some cases.<p>The logical next step is to make a dynamic orchestration endpoint where the clients can define what they need and the same request can respond to all use-cases. This sounds great at first: the REST-like API keeps its one object-one endpoint structure, then there is one general-purpose orchestration layer on top of that, and clients can enjoy the 1-roundtrip performance with just the data they need.<figure class="plantuml image"><svg xmlns="http://www.w3.org/2000/svg"height="418"preserveAspectRatio="none"style="width:436px;height:418px;background:#fff"viewBox="0 0 436 418"width="436"><defs><filter height="300%"id="d54fd773e2a0061dc46c948e371330ef2526e35ccbad87533cdadf0b8e60e481__a"width="300%"x="-1"y="-1"><feGaussianBlur result="blurOut"stdDeviation="2"></feGaussianBlur><feColorMatrix in="blurOut"result="blurOut2"values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"></feColorMatrix><feOffset dx="4"dy="4"in="blurOut2"result="blurOut3"></feOffset><feBlend in="SourceGraphic"in2="blurOut3"></feBlend></filter></defs><path style="stroke:#a80036;stroke-width:1;stroke-dasharray:5,5"d="M82 88.297v323.594M219.5 88.297v323.594m182-323.594v323.594"></path><text font-family="sans-serif"font-size="14"textLength="37"x="61"y="84.995">client</text><circle cx="82.5"cy="15"fill="#FEFECE"filter="url(#d54fd773e2a0061dc46c948e371330ef2526e35ccbad87533cdadf0b8e60e481__a)"style="stroke:#a80036;stroke-width:2"r="8"></circle><path d="M82.5 23v27m-13-19h26m-13 19-13 15m13-15 13 15"fill="none"filter="url(#d54fd773e2a0061dc46c948e371330ef2526e35ccbad87533cdadf0b8e60e481__a)"style="stroke:#a80036;stroke-width:2;fill:none"></path><text font-family="sans-serif"font-size="14"textLength="94"x="169.5"y="68.698">Orchestration</text><text font-family="sans-serif"font-size="14"textLength="62"x="185.5"y="84.995">endpoint</text><circle cx="219.5"cy="39.703"fill="#FEFECE"filter="url(#d54fd773e2a0061dc46c948e371330ef2526e35ccbad87533cdadf0b8e60e481__a)"style="stroke:#a80036;stroke-width:2"r="12"></circle><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m215.5 27.703 6-5-2 5 2 5-6-5z"></path><text font-family="sans-serif"font-size="14"textLength="62"x="367.5"y="84.995">REST API</text><circle cx="401.5"cy="56"fill="#FEFECE"filter="url(#d54fd773e2a0061dc46c948e371330ef2526e35ccbad87533cdadf0b8e60e481__a)"style="stroke:#a80036;stroke-width:2"r="12"></circle><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m397.5 44 6-5-2 5 2 5-6-5zm-190 131.96 10 4-10 4 4-4z"></path><path style="stroke:#a80036;stroke-width:1"d="M82.5 179.961h131"></path><text font-family="sans-serif"font-size="13"textLength="8"x="89.5"y="114.364">{</text><text font-family="sans-serif"font-size="13"textLength="61"x="97.5"y="129.497">GET user,</text><text font-family="sans-serif"font-size="13"textLength="105"x="97.5"y="144.629">createCheckout,</text><text font-family="sans-serif"font-size="13"textLength="81"x="97.5"y="159.762">getCheckout</text><text font-family="sans-serif"font-size="13"textLength="8"x="89.5"y="174.895">}</text><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m389.5 205.094 10 4-10 4 4-4z"></path><path style="stroke:#a80036;stroke-width:1"d="M219.5 209.094h176"></path><text font-family="sans-serif"font-size="13"textLength="61"x="226.5"y="204.028">GET /user</text><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m230.5 234.227-10 4 10 4-4-4z"></path><path style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2"d="M224.5 238.227h176"></path><text font-family="sans-serif"font-size="13"textLength="16"x="236.5"y="233.161">{}</text><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m389.5 263.36 10 4-10 4 4-4z"></path><path style="stroke:#a80036;stroke-width:1"d="M219.5 267.359h176"></path><text font-family="sans-serif"font-size="13"textLength="158"x="226.5"y="262.293">POST /checkout/CE-1234</text><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m230.5 292.492-10 4 10 4-4-4z"></path><path style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2"d="M224.5 296.492h176"></path><text font-family="sans-serif"font-size="13"textLength="16"x="236.5"y="291.426">{}</text><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m389.5 321.625 10 4-10 4 4-4z"></path><path style="stroke:#a80036;stroke-width:1"d="M219.5 325.625h176"></path><text font-family="sans-serif"font-size="13"textLength="149"x="226.5"y="320.559">GET /checkout/CE-1234</text><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m230.5 350.758-10 4 10 4-4-4z"></path><path style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2"d="M224.5 354.758h176"></path><text font-family="sans-serif"font-size="13"textLength="16"x="236.5"y="349.692">{}</text><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m93.5 384.89-10 4 10 4-4-4z"></path><path style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2"d="M87.5 388.891h131"></path><text font-family="sans-serif"font-size="13"textLength="43"x="99.5"y="383.825">results</text><path d="M5 367.758v25h69v-15l-10-10H5"fill="#FBFB77"filter="url(#d54fd773e2a0061dc46c948e371330ef2526e35ccbad87533cdadf0b8e60e481__a)"style="stroke:#a80036;stroke-width:1;fill:#fbfb77"></path><path d="M64 367.758v10h10l-10-10"fill="#FBFB77"style="stroke:#a80036;stroke-width:1;fill:#fbfb77"></path><text font-family="sans-serif"font-size="13"textLength="48"x="11"y="384.825">700 ms</text></svg><figcaption class="caption">Dynamic orchestration endpoint aggregating requests to the REST API</figcaption></figure><p>This is a great solution on the whiteboard but there are problems with it in practice. Since it's based on a REST-like API that builds on HTTP, the orchestration API also <strong>needs to support all these features</strong>. An operation is made of a verb (<code>GET</code>, <code>POST</code>, <code>PUT</code>, ...), a path (<code>/api/user</code>), an optional request body, headers, query parameters, cookies, status codes, content types, and so on. To make a truly universal endpoint, it needs to support a lot of features and they make it complicated for the frontend developers to write these aggregated requests.<p>Then there might be <strong>dependencies</strong> between the individual requests. Fetching multiple things can go in parallel, but when you want to store something and then retrieve some data, the endpoint needs to know what depends on what. Worse still, a query can depend on the <em>result</em> of another query, such as you might want to fetch the manufacturer for the product, but the product query returns the identifier.<h4 id="step-4-graphql">Step 4: GraphQL</h4><p>GraphQL solves these problems. It acts as a universal orchestration endpoint where each field acts like a separate operation. The backend developer needs to define how the server provides a value for a field (this piece of code is called a <em>resolver</em>), then client can define what they want and the response contains only that data.<figure class="plantuml image"><svg xmlns="http://www.w3.org/2000/svg"height="485"preserveAspectRatio="none"style="width:257px;height:485px;background:#fff"viewBox="0 0 257 485"width="257"><defs><filter height="300%"id="69883ef152b3eb824454dac6ad83e273004ab35bc867ffefa5eae5eb070f403b__a"width="300%"x="-1"y="-1"><feGaussianBlur result="blurOut"stdDeviation="2"></feGaussianBlur><feColorMatrix in="blurOut"result="blurOut2"values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"></feColorMatrix><feOffset dx="4"dy="4"in="blurOut2"result="blurOut3"></feOffset><feBlend in="SourceGraphic"in2="blurOut3"></feBlend></filter></defs><path style="stroke:#a80036;stroke-width:1;stroke-dasharray:5,5"d="M26 88.297v389.789M216.5 88.297v389.789"></path><text font-family="sans-serif"font-size="14"textLength="37"x="5"y="84.995">client</text><circle cx="26.5"cy="15"fill="#FEFECE"filter="url(#69883ef152b3eb824454dac6ad83e273004ab35bc867ffefa5eae5eb070f403b__a)"style="stroke:#a80036;stroke-width:2"r="8"></circle><path d="M26.5 23v27m-13-19h26m-13 19-13 15m13-15 13 15"fill="none"filter="url(#69883ef152b3eb824454dac6ad83e273004ab35bc867ffefa5eae5eb070f403b__a)"style="stroke:#a80036;stroke-width:2;fill:none"></path><text font-family="sans-serif"font-size="14"textLength="60"x="183.5"y="84.995">GraphQL</text><circle cx="216.5"cy="56"fill="#FEFECE"filter="url(#69883ef152b3eb824454dac6ad83e273004ab35bc867ffefa5eae5eb070f403b__a)"style="stroke:#a80036;stroke-width:2"r="12"></circle><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m212.5 44 6-5-2 5 2 5-6-5zm-8 192.492 10 4-10 4 4-4z"></path><path style="stroke:#a80036;stroke-width:1"d="M26.5 240.492h184"></path><text font-family="sans-serif"font-size="13"textLength="48"x="33.5"y="114.364">query {</text><text font-family="sans-serif"font-size="13"textLength="140"x="41.5"y="129.497">order(id: "OR-1234") {</text><text font-family="sans-serif"font-size="13"textLength="68"x="49.5"y="144.629">products {</text><text font-family="sans-serif"font-size="13"textLength="37"x="57.5"y="159.762">name</text><text font-family="sans-serif"font-size="13"textLength="99"x="57.5"y="174.895">manufacturer {</text><text font-family="sans-serif"font-size="13"textLength="37"x="65.5"y="190.028">name</text><text font-family="sans-serif"font-size="13"textLength="8"x="57.5"y="205.161">}</text><text font-family="sans-serif"font-size="13"textLength="8"x="41.5"y="220.293">}</text><text font-family="sans-serif"font-size="13"textLength="8"x="33.5"y="235.426">}</text><path d="M181 253.492v40h67v-30l-10-10h-57"fill="#FBFB77"filter="url(#69883ef152b3eb824454dac6ad83e273004ab35bc867ffefa5eae5eb070f403b__a)"style="stroke:#a80036;stroke-width:1;fill:#fbfb77"></path><path d="M238 253.492v10h10l-10-10"fill="#FBFB77"style="stroke:#a80036;stroke-width:1;fill:#fbfb77"></path><text font-family="sans-serif"font-size="13"textLength="46"x="187"y="270.559">resolve</text><text font-family="sans-serif"font-size="13"textLength="33"x="187"y="285.692">fields</text><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m37.5 456.086-10 4 10 4-4-4z"></path><path style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2"d="M31.5 460.086h184"></path><text font-family="sans-serif"font-size="13"textLength="63"x="43.5"y="318.825">{"data": {</text><text font-family="sans-serif"font-size="13"textLength="55"x="51.5"y="333.957">"order: {</text><text font-family="sans-serif"font-size="13"textLength="87"x="59.5"y="349.09">"products": [{</text><text font-family="sans-serif"font-size="13"textLength="116"x="67.5"y="364.223">"name": "Battery",</text><text font-family="sans-serif"font-size="13"textLength="113"x="67.5"y="379.356">"manufacturer": {</text><text font-family="sans-serif"font-size="13"textLength="134"x="75.5"y="394.489">"name": "Acme corp"</text><text font-family="sans-serif"font-size="13"textLength="8"x="67.5"y="409.622">}</text><text font-family="sans-serif"font-size="13"textLength="13"x="59.5"y="424.754">}]</text><text font-family="sans-serif"font-size="13"textLength="8"x="51.5"y="439.887">}</text><text font-family="sans-serif"font-size="13"textLength="16"x="43.5"y="455.02">}}</text></svg><figcaption class="caption">GraphQL-based orchestration</figcaption></figure><p>It handles dependencies by separating read-only operations (queries) from write-read ones (mutations) and handles dependent data by relying on a hierarchy between the types. And it supports only a subset of HTTP, so UI developers can focus on types, fields, and arguments. Then the schema provides a centralized documentation.<p>Moreover, GraphQL is a standard unlike the home-grown REST API aggregator some companies came up. If somebody is familiar with the basics they can start working on any parts of the stack immediately.<h3 id="advantages-over-rest">Advantages over REST</h3><h4 id="batteries-included">Batteries included</h4><p>GraphQL relies on a schema to define the types and their fields (data and connections) which means all GraphQL-based APIs share a single documentation format that external tools can rely on. This means visualization, security analysis, and documentation generation are all possible with support to all GraphQL APIs out there. For example, <a href="https://graphql-inspector.com/">GraphQL inspector</a> detects changes between schema versions.<p>The query format is also standardized, so you can use advanced features, such as variables, directives, and fragments, with app GraphQL-based backends. This adds powerful features right from the start. Moreover, <a href="https://graphql.org/learn/introspection/">introspection queries</a> allow extracting structure from a live endpoint, which is used by <a href="http://nathanrandal.com/graphql-visualizer/">several visualizers</a>. And the common query format allows tools to <a href="https://graphql-ruby.org/queries/ast_analysis.html">analyze</a> what is sent and even provide <a href="https://github.com/pa-bru/graphql-cost-analysis">cost estimates</a>.<p>This is all possible with REST too, but that relies on opt-in. For example, a REST API can use <a href="https://www.openapis.org/">OpenAPI</a> that provides documentation and introspection capablities, but many APIs don't use that. With GraphQL, you can be sure that what is required by the standard is available.<div class="floatbox floatbox-center"><div class="tcolorbox tcolorbox-info"><div class="tbox-header">Extensibility vs built-in features</div><div class="tbox-body"><p>This is a double-edge sword though. It's great to have features that you can be sure are present, but that also complicates the API when a lot of those extra things are not needed. Also, when the specifications evolve and add more features they need to preserve backwards-compatibility. This means legacy stuff accumulates over time.<p>Moreover, unused features make harder to secure an endpoint. For example, it's challenging to get a list of all fields requested in a query due to aliases, inline fragments, and directives. If a security solution depends on this list, it needs to include all features of GraphQL.</div></div></div><h4 id="defined-overfetching-underfetching">No overfetching or underfetching</h4><p>REST-based APIs usually suffer from the <strong>n+1 request problem</strong>. Let's say a client needs to show all the users and their todo items. For this, it needs to send multiple requests:<ul><li>GET <code>/user</code><li>GET <code>/user/user1/todo</code><li>GET <code>/user/user2/todo</code></ul><figure class="plantuml image"><svg xmlns="http://www.w3.org/2000/svg"height="464"preserveAspectRatio="none"style="width:378px;height:464px;background:#fff"viewBox="0 0 378 464"width="378"><defs><filter height="300%"id="943f8a0bba245bc09570b7807ce1c6fc102cddbc59f73da1749e6ec6c5d9fa01__a"width="300%"x="-1"y="-1"><feGaussianBlur result="blurOut"stdDeviation="2"></feGaussianBlur><feColorMatrix in="blurOut"result="blurOut2"values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"></feColorMatrix><feOffset dx="4"dy="4"in="blurOut2"result="blurOut3"></feOffset><feBlend in="SourceGraphic"in2="blurOut3"></feBlend></filter></defs><path style="stroke:#a80036;stroke-width:1;stroke-dasharray:5,5"d="M36 88.297v369.594M201 88.297v369.594M351 88.297v369.594"></path><text font-family="sans-serif"font-size="14"textLength="56"x="5"y="84.995">browser</text><circle cx="36"cy="15"fill="#FEFECE"filter="url(#943f8a0bba245bc09570b7807ce1c6fc102cddbc59f73da1749e6ec6c5d9fa01__a)"style="stroke:#a80036;stroke-width:2"r="8"></circle><path d="M36 23v27M23 31h26M36 50 23 65m13-15 13 15"fill="none"filter="url(#943f8a0bba245bc09570b7807ce1c6fc102cddbc59f73da1749e6ec6c5d9fa01__a)"style="stroke:#a80036;stroke-width:2;fill:none"></path><text font-family="sans-serif"font-size="14"textLength="21"x="187.5"y="84.995">API</text><circle cx="201"cy="56"fill="#FEFECE"filter="url(#943f8a0bba245bc09570b7807ce1c6fc102cddbc59f73da1749e6ec6c5d9fa01__a)"style="stroke:#a80036;stroke-width:2"r="12"></circle><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m197 44 6-5-2 5 2 5-6-5z"></path><text font-family="sans-serif"font-size="14"textLength="18"x="339"y="84.995">db</text><path d="M333 36c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10V36"fill="#FEFECE"filter="url(#943f8a0bba245bc09570b7807ce1c6fc102cddbc59f73da1749e6ec6c5d9fa01__a)"style="stroke:#000;stroke-width:1.5;fill:#fefece"></path><path d="M333 36c0 10 18 10 18 10s18 0 18-10"fill="none"style="stroke:#000;stroke-width:1.5;fill:none"></path><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m189 115.43 10 4-10 4 4-4z"></path><path style="stroke:#a80036;stroke-width:1"d="M36 119.43h159"></path><text font-family="sans-serif"font-size="13"textLength="61"x="43"y="114.364">GET /user</text><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m339 144.563 10 4-10 4 4-4z"></path><path style="stroke:#a80036;stroke-width:1"d="M201 148.563h144"></path><text font-family="sans-serif"font-size="13"textLength="57"x="208"y="143.497">list users</text><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m212 173.695-10 4 10 4-4-4z"></path><path style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2"d="M206 177.695h144"></path><text font-family="sans-serif"font-size="13"textLength="35"x="218"y="172.629">users</text><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m47 202.828-10 4 10 4-4-4z"></path><path style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2"d="M41 206.828h159"></path><text font-family="sans-serif"font-size="13"textLength="35"x="53"y="201.762">users</text><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m189 231.96 10 4-10 4 4-4z"></path><path style="stroke:#a80036;stroke-width:1"d="M36 235.961h159"></path><text font-family="sans-serif"font-size="13"textLength="141"x="43"y="230.895">GET /user/user1/todos</text><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m339 261.094 10 4-10 4 4-4z"></path><path style="stroke:#a80036;stroke-width:1"d="M201 265.094h144"></path><text font-family="sans-serif"font-size="13"textLength="126"x="208"y="260.028">get todos for user 1</text><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m212 290.227-10 4 10 4-4-4z"></path><path style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2"d="M206 294.227h144"></path><text font-family="sans-serif"font-size="13"textLength="76"x="218"y="289.161">user1 todos</text><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m47 319.36-10 4 10 4-4-4z"></path><path style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2"d="M41 323.359h159"></path><text font-family="sans-serif"font-size="13"textLength="76"x="53"y="318.293">user1 todos</text><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m189 348.492 10 4-10 4 4-4z"></path><path style="stroke:#a80036;stroke-width:1"d="M36 352.492h159"></path><text font-family="sans-serif"font-size="13"textLength="141"x="43"y="347.426">GET /user/user2/todos</text><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m339 377.625 10 4-10 4 4-4z"></path><path style="stroke:#a80036;stroke-width:1"d="M201 381.625h144"></path><text font-family="sans-serif"font-size="13"textLength="126"x="208"y="376.559">get todos for user 2</text><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m212 406.758-10 4 10 4-4-4z"></path><path style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2"d="M206 410.758h144"></path><text font-family="sans-serif"font-size="13"textLength="76"x="218"y="405.692">user2 todos</text><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m47 435.89-10 4 10 4-4-4z"></path><path style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2"d="M41 439.891h159"></path><text font-family="sans-serif"font-size="13"textLength="76"x="53"y="434.825">user2 todos</text></svg><figcaption class="caption">n+1 requests</figcaption></figure><p>While the second part can be parallelized (the <code>/user/:id/todo</code> calls rely only on the result of the <code>/user</code> call), getting all the data still requires an extra roundtrip. And in practice, the number of serial requests is the main reason a webapp is slow. This is called <strong>underfetching</strong>, as the response contains <em>less</em> than the client needs, and it needs other requests to receive the missing parts.<p>With GraphQL, a query can describe all the data it needs in advance and it's up to the server to collect it and return in a single response. For example, this query asks for all users, their data, and all their todo items:<pre class="highlight"><code><span class="hljs-keyword">query</span> {
  allUsers {
    name
    todos {
      name
      checked
    }
  }
}</code></pre><p>The response contains all the data that the client needs, so there is no need to send a second request. In the ideal case, a client needs to send only one request and the response contains everything it needs and nothing more. Defining the fields fetched prevents <strong>overfetching</strong>, when the response contains <em>more</em> than the client needs. With a REST-like endpoint, responses usually contain the full object. In GraphQL, the client defines what it needs.<figure class="plantuml image"><svg xmlns="http://www.w3.org/2000/svg"height="348"preserveAspectRatio="none"style="width:461px;height:348px;background:#fff"viewBox="0 0 461 348"width="461"><defs><filter height="300%"id="1e7bc7e96432dcfc12dd9ae8ed0a43e827afd7eb1d14e9c8a9de8604a66251fd__a"width="300%"x="-1"y="-1"><feGaussianBlur result="blurOut"stdDeviation="2"></feGaussianBlur><feColorMatrix in="blurOut"result="blurOut2"values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"></feColorMatrix><feOffset dx="4"dy="4"in="blurOut2"result="blurOut3"></feOffset><feBlend in="SourceGraphic"in2="blurOut3"></feBlend></filter></defs><path style="stroke:#a80036;stroke-width:1;stroke-dasharray:5,5"d="M36 88.297v253.062M284 88.297v253.062M434 88.297v253.062"></path><text font-family="sans-serif"font-size="14"textLength="56"x="5"y="84.995">browser</text><circle cx="36"cy="15"fill="#FEFECE"filter="url(#1e7bc7e96432dcfc12dd9ae8ed0a43e827afd7eb1d14e9c8a9de8604a66251fd__a)"style="stroke:#a80036;stroke-width:2"r="8"></circle><path d="M36 23v27M23 31h26M36 50 23 65m13-15 13 15"fill="none"filter="url(#1e7bc7e96432dcfc12dd9ae8ed0a43e827afd7eb1d14e9c8a9de8604a66251fd__a)"style="stroke:#a80036;stroke-width:2;fill:none"></path><text font-family="sans-serif"font-size="14"textLength="21"x="270.5"y="84.995">API</text><circle cx="284"cy="56"fill="#FEFECE"filter="url(#1e7bc7e96432dcfc12dd9ae8ed0a43e827afd7eb1d14e9c8a9de8604a66251fd__a)"style="stroke:#a80036;stroke-width:2"r="12"></circle><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m280 44 6-5-2 5 2 5-6-5z"></path><text font-family="sans-serif"font-size="14"textLength="18"x="422"y="84.995">db</text><path d="M416 36c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10V36"fill="#FEFECE"filter="url(#1e7bc7e96432dcfc12dd9ae8ed0a43e827afd7eb1d14e9c8a9de8604a66251fd__a)"style="stroke:#000;stroke-width:1.5;fill:#fefece"></path><path d="M416 36c0 10 18 10 18 10s18 0 18-10"fill="none"style="stroke:#000;stroke-width:1.5;fill:none"></path><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m272 115.43 10 4-10 4 4-4z"></path><path style="stroke:#a80036;stroke-width:1"d="M36 119.43h242"></path><text font-family="sans-serif"font-size="13"textLength="224"x="43"y="114.364">GraphQL query for users and todos</text><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m422 144.563 10 4-10 4 4-4z"></path><path style="stroke:#a80036;stroke-width:1"d="M284 148.563h144"></path><text font-family="sans-serif"font-size="13"textLength="57"x="291"y="143.497">list users</text><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m295 173.695-10 4 10 4-4-4z"></path><path style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2"d="M289 177.695h144"></path><text font-family="sans-serif"font-size="13"textLength="35"x="301"y="172.629">users</text><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m422 202.828 10 4-10 4 4-4z"></path><path style="stroke:#a80036;stroke-width:1"d="M284 206.828h144"></path><text font-family="sans-serif"font-size="13"textLength="126"x="291"y="201.762">get todos for user 1</text><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m295 231.96-10 4 10 4-4-4z"></path><path style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2"d="M289 235.961h144"></path><text font-family="sans-serif"font-size="13"textLength="76"x="301"y="230.895">user1 todos</text><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m422 261.094 10 4-10 4 4-4z"></path><path style="stroke:#a80036;stroke-width:1"d="M284 265.094h144"></path><text font-family="sans-serif"font-size="13"textLength="126"x="291"y="260.028">get todos for user 2</text><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m295 290.227-10 4 10 4-4-4z"></path><path style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2"d="M289 294.227h144"></path><text font-family="sans-serif"font-size="13"textLength="76"x="301"y="289.161">user2 todos</text><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m47 319.36-10 4 10 4-4-4z"></path><path style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2"d="M41 323.359h242"></path><text font-family="sans-serif"font-size="13"textLength="103"x="53"y="318.293">users and todos</text></svg><figcaption class="caption">1 request</figcaption></figure><p>Notice that GraphQL does not reduce the amount of work needed to fetch the information, it just shifts that from the client to the server. If the users and the todo items are stored in a database, the backend still needs to send the same amount of requests to it. But this is hidden from the client and the backend &lt;-&gt; database communication is usually way faster than the client &lt;-&gt; backend.<h3 id="disadvantages">Disadvantages</h3><p>While GraphQL solves problems with multiple roundtrips, it also brings its own problems. In this chapter we'll look into some of them and see what we can do about them.<h4 id="expensive-queries">Expensive queries</h4><p>While it's great that clients can define what data they need, this also means a query can fetch a lot of data straining resources on the backend. For example, a query that gets a single object and some properties of it is cheap:<pre class="highlight"><code><span class="hljs-keyword">query</span> {
  user(id: <span class="hljs-string">"user1"</span>) {
    name
  }
}</code></pre><p>This query needs a single query to a database and produces a small response.<p>But a similar query that fetches a user's second order friends graph:<pre class="highlight"><code><span class="hljs-keyword">query</span> {
  user(id: <span class="hljs-string">"user1"</span>) {
    name
    email
    friends {
      name
      email
      friends {
        name
        email
      }
    }
  }
}</code></pre><p>The query itelf is not that more complex but it might generate a huge load on the backend. If the user has 200 friends and they each has 200 friends, it will contain a total of 4201 user objects. Worse still, if the email addresses are stored in a separate system, such as a user directory, that needs an additional HTTP request <em>per user</em>. Worse case, the above query can:<ul><li>fetch 4201 objects from the database<li>send 4201 requests to the user directory<li>generate a response of hundreds of kilobytes</ul><p>Because of this, standard rate limiting solutions (request/sec per user per endpoint) do not work. What you can do is add <a href="https://github.com/slicknode/graphql-query-complexity">static analysis</a> that tries to quess what the cost of the query is likely to be and deny too expensive ones. But this is something you need to opt-in and there are no standard solution yet.<h4 id="non-atomic-queries">Non-atomic queries</h4><p>There is an excpectation from clients that a query returns a point-in-time view of the data and the response is always consistent. This is easier with a REST-like API as it provides access to one object at a time, and also there is usually one handler for one object. This makes it possible to rely on the database's transactions. Because of this, it usually can not happen that the client get back a "half object", as some other process deleted it while the handler read the properties.<figure class="plantuml image"><svg xmlns="http://www.w3.org/2000/svg"height="380"preserveAspectRatio="none"style="width:351px;height:380px;background:#fff"viewBox="0 0 351 380"width="351"><defs><filter height="300%"id="1f9279e8f7fb189786b971e59c13221c79b52b55999d2c6008b4ed1695a4a4d7__a"width="300%"x="-1"y="-1"><feGaussianBlur result="blurOut"stdDeviation="2"></feGaussianBlur><feColorMatrix in="blurOut"result="blurOut2"values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"></feColorMatrix><feOffset dx="4"dy="4"in="blurOut2"result="blurOut3"></feOffset><feBlend in="SourceGraphic"in2="blurOut3"></feBlend></filter></defs><path style="stroke:#a80036;stroke-width:1;stroke-dasharray:5,5"d="M26 88.297v285.328M249 88.297v285.328"></path><text font-family="sans-serif"font-size="14"textLength="37"x="5"y="84.995">client</text><circle cx="26.5"cy="15"fill="#FEFECE"filter="url(#1f9279e8f7fb189786b971e59c13221c79b52b55999d2c6008b4ed1695a4a4d7__a)"style="stroke:#a80036;stroke-width:2"r="8"></circle><path d="M26.5 23v27m-13-19h26m-13 19-13 15m13-15 13 15"fill="none"filter="url(#1f9279e8f7fb189786b971e59c13221c79b52b55999d2c6008b4ed1695a4a4d7__a)"style="stroke:#a80036;stroke-width:2;fill:none"></path><text font-family="sans-serif"font-size="14"textLength="61"x="216"y="84.995">Backend</text><circle cx="249.5"cy="56"fill="#FEFECE"filter="url(#1f9279e8f7fb189786b971e59c13221c79b52b55999d2c6008b4ed1695a4a4d7__a)"style="stroke:#a80036;stroke-width:2"r="12"></circle><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m245.5 44 6-5-2 5 2 5-6-5zm-8 71.43 10 4-10 4 4-4z"></path><path style="stroke:#a80036;stroke-width:1"d="M26.5 119.43h217"></path><text font-family="sans-serif"font-size="13"textLength="61"x="33.5"y="114.364">GET /user</text><path d="M188 132.43v25h119v-15l-10-10H188"fill="#FBFB77"filter="url(#1f9279e8f7fb189786b971e59c13221c79b52b55999d2c6008b4ed1695a4a4d7__a)"style="stroke:#a80036;stroke-width:1;fill:#fbfb77"></path><path d="M297 132.43v10h10l-10-10"fill="#FBFB77"style="stroke:#a80036;stroke-width:1;fill:#fbfb77"></path><text font-family="sans-serif"font-size="13"textLength="98"x="194"y="149.497">read username</text><path d="M211 171.563v25h73v-15l-10-10h-63"fill="#FBFB77"filter="url(#1f9279e8f7fb189786b971e59c13221c79b52b55999d2c6008b4ed1695a4a4d7__a)"style="stroke:#a80036;stroke-width:1;fill:#fbfb77"></path><path d="M274 171.563v10h10l-10-10"fill="#FBFB77"style="stroke:#a80036;stroke-width:1;fill:#fbfb77"></path><text font-family="sans-serif"font-size="13"textLength="52"x="217"y="188.629">read bio</text><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m260.5 222.828-10 4 10 4-4-4z"></path><path style="stroke:#a80036;stroke-width:1"d="M254.5 226.828h90"></path><text font-family="sans-serif"font-size="13"textLength="72"x="266.5"y="221.762">delete user</text><path d="M203 239.828v25h89v-15l-10-10h-79"fill="#FBFB77"filter="url(#1f9279e8f7fb189786b971e59c13221c79b52b55999d2c6008b4ed1695a4a4d7__a)"style="stroke:#a80036;stroke-width:1;fill:#fbfb77"></path><path d="M282 239.828v10h10l-10-10"fill="#FBFB77"style="stroke:#a80036;stroke-width:1;fill:#fbfb77"></path><text font-family="sans-serif"font-size="13"textLength="68"x="209"y="256.895">read email</text><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m37.5 351.625-10 4 10 4-4-4z"></path><path style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2"d="M31.5 355.625h217"></path><text font-family="sans-serif"font-size="13"textLength="8"x="43.5"y="290.028">{</text><text font-family="sans-serif"font-size="13"textLength="133"x="51.5"y="305.161">"username": "user1",</text><text font-family="sans-serif"font-size="13"textLength="119"x="51.5"y="320.293">"bio": "Hey there!",</text><text font-family="sans-serif"font-size="13"textLength="191"x="51.5"y="335.426">"email": "user@example.com"</text><text font-family="sans-serif"font-size="13"textLength="8"x="43.5"y="350.559">}</text></svg><figcaption class="caption">Transactions prevent half-read objects</figcaption></figure><p>But GraphQL works differently. There is no single handler that responds to the query, but there are <em>fields</em> that the backend processes and provides a value for. And since these are separate processes, if the database changes during a query it can return inconsistent objects or even throw an error.<figure class="plantuml image"><svg xmlns="http://www.w3.org/2000/svg"height="410"preserveAspectRatio="none"style="width:367px;height:410px;background:#fff"viewBox="0 0 367 410"width="367"><defs><filter height="300%"id="601f66b2ecad8c331c8d0b046ece8bbd01496ef2eb8186a2bdca47b2e2b64b80__a"width="300%"x="-1"y="-1"><feGaussianBlur result="blurOut"stdDeviation="2"></feGaussianBlur><feColorMatrix in="blurOut"result="blurOut2"values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"></feColorMatrix><feOffset dx="4"dy="4"in="blurOut2"result="blurOut3"></feOffset><feBlend in="SourceGraphic"in2="blurOut3"></feBlend></filter></defs><path style="stroke:#a80036;stroke-width:1;stroke-dasharray:5,5"d="M26 88.297v315.594M265 88.297v315.594"></path><text font-family="sans-serif"font-size="14"textLength="37"x="5"y="84.995">client</text><circle cx="26.5"cy="15"fill="#FEFECE"filter="url(#601f66b2ecad8c331c8d0b046ece8bbd01496ef2eb8186a2bdca47b2e2b64b80__a)"style="stroke:#a80036;stroke-width:2"r="8"></circle><path d="M26.5 23v27m-13-19h26m-13 19-13 15m13-15 13 15"fill="none"filter="url(#601f66b2ecad8c331c8d0b046ece8bbd01496ef2eb8186a2bdca47b2e2b64b80__a)"style="stroke:#a80036;stroke-width:2;fill:none"></path><text font-family="sans-serif"font-size="14"textLength="61"x="232"y="84.995">Backend</text><circle cx="265.5"cy="56"fill="#FEFECE"filter="url(#601f66b2ecad8c331c8d0b046ece8bbd01496ef2eb8186a2bdca47b2e2b64b80__a)"style="stroke:#a80036;stroke-width:2"r="12"></circle><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m261.5 44 6-5-2 5 2 5-6-5zm-8 162.227 10 4-10 4 4-4z"></path><path style="stroke:#a80036;stroke-width:1"d="M26.5 210.227h233"></path><text font-family="sans-serif"font-size="13"textLength="48"x="33.5"y="114.364">query {</text><text font-family="sans-serif"font-size="13"textLength="115"x="41.5"y="129.497">user(id: "user1") {</text><text font-family="sans-serif"font-size="13"textLength="37"x="49.5"y="144.629">name</text><text font-family="sans-serif"font-size="13"textLength="19"x="49.5"y="159.762">bio</text><text font-family="sans-serif"font-size="13"textLength="35"x="49.5"y="174.895">email</text><text font-family="sans-serif"font-size="13"textLength="8"x="41.5"y="190.028">}</text><text font-family="sans-serif"font-size="13"textLength="8"x="33.5"y="205.161">}</text><path d="M204 223.227v25h119v-15l-10-10H204"fill="#FBFB77"filter="url(#601f66b2ecad8c331c8d0b046ece8bbd01496ef2eb8186a2bdca47b2e2b64b80__a)"style="stroke:#a80036;stroke-width:1;fill:#fbfb77"></path><path d="M313 223.227v10h10l-10-10"fill="#FBFB77"style="stroke:#a80036;stroke-width:1;fill:#fbfb77"></path><text font-family="sans-serif"font-size="13"textLength="98"x="210"y="240.293">read username</text><path d="M227 262.36v25h73v-15l-10-10h-63"fill="#FBFB77"filter="url(#601f66b2ecad8c331c8d0b046ece8bbd01496ef2eb8186a2bdca47b2e2b64b80__a)"style="stroke:#a80036;stroke-width:1;fill:#fbfb77"></path><path d="M290 262.36v10h10l-10-10"fill="#FBFB77"style="stroke:#a80036;stroke-width:1;fill:#fbfb77"></path><text font-family="sans-serif"font-size="13"textLength="52"x="233"y="279.426">read bio</text><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m276.5 313.625-10 4 10 4-4-4z"></path><path style="stroke:#a80036;stroke-width:1"d="M270.5 317.625h90"></path><text font-family="sans-serif"font-size="13"textLength="72"x="282.5"y="312.559">delete user</text><path d="M219 330.625v25h89v-15l-10-10h-79"fill="#FBFB77"filter="url(#601f66b2ecad8c331c8d0b046ece8bbd01496ef2eb8186a2bdca47b2e2b64b80__a)"style="stroke:#a80036;stroke-width:1;fill:#fbfb77"></path><path d="M298 330.625v10h10l-10-10"fill="#FBFB77"style="stroke:#a80036;stroke-width:1;fill:#fbfb77"></path><text font-family="sans-serif"font-size="13"textLength="68"x="225"y="347.692">read email</text><path fill="#A80036"style="stroke:#a80036;stroke-width:1;fill:#a80036"d="m37.5 381.89-10 4 10 4-4-4z"></path><path style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2"d="M31.5 385.891h233"></path><text font-family="sans-serif"font-size="13"textLength="215"x="43.5"y="380.825">Error: can not read email of user1</text></svg><figcaption class="caption">A query can throw an error or return an inconsistent result</figcaption></figure><p>Because of this, clients should always expect that a query might succeed if retried for non-client-side errors.<h4 id="different-terminology">Different terminology</h4><p>And, of course, a different technology comes with different parts and different terminology. It's less of a problem for clients, as they get most of the benefits of the schema, but developing a GraphQL backend is different from a REST-like one.<p>Especially the resolver architecture and access control needs a lot of getting used to that makes it harder to adopt the technology.<div class="tcolorbox tcolorbox-secondary my-5"><div class="tbox-header fw-bold">Master AppSync and GraphQL</div><div class="tbox-body"><div>Support this book and get all future updates and extra chapters in ebook format.</div><div class="d-flex justify-content-center"><a role="button"href="https://tsallai.gumroad.com/l/graphql-on-aws-appsync-book"class="btn btn-primary not-styled mt-3 text-white">Buy the book</a></div></div></div><div class="pagination row"><div class="col-6"><a href="/graphql-basics/"class="border rounded d-block p-3"><div class="pagination-sublabel text-muted small">Previous</div><div class="pagination-title">&lt; GraphQL basics</div></a></div><div class="col-6"><a href="/graphql-basics/schema/"class="border rounded d-block p-3 text-end ms-auto"><div class="pagination-sublabel text-muted small">Next</div><div class="pagination-title">Schema &gt;</div></a></div></div><footer>Â© TamÃ¡s Sallai - <a href="https://advancedweb.hu">advancedweb.hu</a></footer></div><div class="col-lg-3 d-none d-lg-block"><div class="toc-container"><a style="margin-left: 0em"href="#graphql-vs-rest">GraphQL vs REST</a> <a style="margin-left: 1em"href="#what-is-rest">What is REST</a> <a style="margin-left: 1em"href="#defined-what-is-graphql">What is GraphQL</a> <a style="margin-left: 1em"href="#the-path-to-graphql">The path to GraphQL</a> <a style="margin-left: 2em"href="#step-1-rest-like">Step 1: REST-like</a> <a style="margin-left: 2em"href="#defined-orchestration-endpoint">Step 2: Orchestration endpoint</a> <a style="margin-left: 2em"href="#step-3-dynamic-orchestration">Step 3: Dynamic orchestration</a> <a style="margin-left: 2em"href="#step-4-graphql">Step 4: GraphQL</a> <a style="margin-left: 1em"href="#advantages-over-rest">Advantages over REST</a> <a style="margin-left: 2em"href="#batteries-included">Batteries included</a> <a style="margin-left: 2em"href="#defined-overfetching-underfetching">No overfetching or underfetching</a> <a style="margin-left: 1em"href="#disadvantages">Disadvantages</a> <a style="margin-left: 2em"href="#expensive-queries">Expensive queries</a> <a style="margin-left: 2em"href="#non-atomic-queries">Non-atomic queries</a> <a style="margin-left: 2em"href="#different-terminology">Different terminology</a></div></div></div></div></div><script src="/assets/main.077454cb0bffe3695e9176b1b5f8a7fd9676d920.js"></script>